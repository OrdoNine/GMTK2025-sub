[gd_scene load_steps=62 format=4 uid="uid://dsd4k1sulk80x"]

[ext_resource type="Script" uid="uid://xk60rns8ltbn" path="res://scripts/game_loader.gd" id="1_6bp64"]
[ext_resource type="Texture2D" uid="uid://c4mg3n16gr2a7" path="res://assets/collectibles-tilemap.png" id="1_21xkr"]
[ext_resource type="Script" uid="uid://db8px7j78l74f" path="res://scripts/cam.gd" id="1_ynf5e"]
[ext_resource type="PackedScene" uid="uid://dtffmkkwd7jot" path="res://scenes/ui_menus/game_play_ui/game_play_ui.tscn" id="2_344ge"]
[ext_resource type="Script" uid="uid://downf0rj4synv" path="res://scripts/player_controller.gd" id="2_bo1nx"]
[ext_resource type="PackedScene" uid="uid://bu2xnaiq3ifd6" path="res://scenes/game/map.tscn" id="2_wsu2k"]
[ext_resource type="PackedScene" uid="uid://b7qcbfueopawi" path="res://scenes/ui_menus/pause_ui/pause_ui.tscn" id="3_hptm8"]
[ext_resource type="FontFile" uid="uid://llyue0qrvm3r" path="res://assets/fonts/ProggyClean.ttf" id="3_kry3j"]
[ext_resource type="PackedScene" uid="uid://c66bqd2v2jk0" path="res://scenes/ui_menus/death_menu/death_menu.tscn" id="4_d1ilt"]
[ext_resource type="PackedScene" uid="uid://brdx2088afirh" path="res://scenes/ui_menus/about_controls/about_controls.tscn" id="4_k12tt"]
[ext_resource type="PackedScene" uid="uid://dkmnjoqamejhy" path="res://scenes/ui_menus/new_loop_wait_menu/loop_start_wait_menu.tscn" id="4_wsu2k"]
[ext_resource type="PackedScene" uid="uid://bijma4oxrj1e" path="res://scenes/ui_menus/win_menu/win_menu.tscn" id="5_muem4"]
[ext_resource type="Script" uid="uid://cnb0boxepf8j1" path="res://scripts/mace_chain.gd" id="7_6bp64"]
[ext_resource type="PackedScene" uid="uid://ec3cv7kedtud" path="res://scenes/ui_menus/game_over_menu/game_over.tscn" id="11_pdsj5"]
[ext_resource type="Script" uid="uid://dxhlmw6xjfhaw" path="res://scripts/win.gd" id="12_fdnlq"]
[ext_resource type="Texture2D" uid="uid://c3ncuyamidcqv" path="res://assets/strudel-sheet.png" id="12_k12tt"]
[ext_resource type="Texture2D" uid="uid://cyshaitips887" path="res://assets/maceartifact.png" id="13_0ld40"]
[ext_resource type="Texture2D" uid="uid://tj3y8eqp11a4" path="res://assets/spark.png" id="14_gqmmt"]
[ext_resource type="PackedScene" uid="uid://b2fcsh0tiky6b" path="res://objects/realized-items/mace/mace.tscn" id="15_wsu2k"]
[ext_resource type="AudioStream" uid="uid://dp3ewhba42j2s" path="res://assets/music/rushed.ogg" id="16_k12tt"]
[ext_resource type="Texture2D" uid="uid://bpegee8ggqnhy" path="res://assets/maceybg.png" id="17_muem4"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_6bp64"]
texture = ExtResource("1_21xkr")
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_344ge"]
sources/1 = SubResource("TileSetAtlasSource_6bp64")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8gbba"]
size = Vector2(15, 15)

[sub_resource type="AtlasTexture" id="AtlasTexture_h1bgf"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_b3802"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fevyy"]
atlas = ExtResource("12_k12tt")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hibaj"]
atlas = ExtResource("12_k12tt")
region = Rect2(96, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k12tt"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_s8vy0"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pdsj5"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ee4r6"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gt3je"]
atlas = ExtResource("12_k12tt")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3pmx8"]
atlas = ExtResource("12_k12tt")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_u50mg"]
atlas = ExtResource("12_k12tt")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cbgmd"]
atlas = ExtResource("12_k12tt")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1w6v2"]
atlas = ExtResource("12_k12tt")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ueoa1"]
atlas = ExtResource("12_k12tt")
region = Rect2(224, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6vcvc"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7k868"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hpc6h"]
atlas = ExtResource("12_k12tt")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kltya"]
atlas = ExtResource("12_k12tt")
region = Rect2(96, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_e08e2"]
atlas = ExtResource("12_k12tt")
region = Rect2(128, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_neg2b"]
atlas = ExtResource("12_k12tt")
region = Rect2(160, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_r33sp"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hdf80"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jwpg7"]
atlas = ExtResource("12_k12tt")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k2e45"]
atlas = ExtResource("12_k12tt")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_536cc"]
atlas = ExtResource("12_k12tt")
region = Rect2(128, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_aqgau"]
atlas = ExtResource("12_k12tt")
region = Rect2(160, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8cuat"]
atlas = ExtResource("12_k12tt")
region = Rect2(192, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_o1aky"]
atlas = ExtResource("12_k12tt")
region = Rect2(224, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kwxat"]
atlas = ExtResource("12_k12tt")
region = Rect2(0, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_aa8k8"]
atlas = ExtResource("12_k12tt")
region = Rect2(32, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kqrg6"]
atlas = ExtResource("12_k12tt")
region = Rect2(64, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nwwfm"]
atlas = ExtResource("12_k12tt")
region = Rect2(96, 128, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_s8vy0"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h1bgf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b3802")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fevyy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hibaj")
}],
"loop": true,
"name": &"fall",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_k12tt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s8vy0")
}],
"loop": true,
"name": &"hurt",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pdsj5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ee4r6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gt3je")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3pmx8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u50mg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cbgmd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1w6v2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ueoa1")
}],
"loop": true,
"name": &"idle",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6vcvc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7k868")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hpc6h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kltya")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e08e2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_neg2b")
}],
"loop": false,
"name": &"jump",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_r33sp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hdf80")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jwpg7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k2e45")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_536cc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aqgau")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8cuat")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o1aky")
}],
"loop": true,
"name": &"run",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kwxat")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aa8k8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kqrg6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nwwfm")
}],
"loop": true,
"name": &"wallslide",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kry3j"]
size = Vector2(32, 32)

[sub_resource type="Curve" id="Curve_yc10j"]
_data = [Vector2(0.244318, 0), 0.0, 7.10112, 0, 0, Vector2(0.818182, 0.910112), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="LabelSettings" id="LabelSettings_6bp64"]
font = ExtResource("3_kry3j")

[sub_resource type="Gradient" id="Gradient_jbj1t"]
offsets = PackedFloat32Array(0.0266667, 0.166667, 0.846667, 1)
colors = PackedColorArray(0, 0.882353, 0.541176, 0, 0, 0.882353, 0.541176, 1, 1, 1, 1, 1, 1, 1, 1, 0)

[node name="Game" type="Node2D"]
texture_filter = 1
script = ExtResource("1_6bp64")

[node name="Map" parent="." instance=ExtResource("2_wsu2k")]

[node name="CollectiblesTileMap" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAD///z/AQAAAAAAAAAEAPj/AQAAAAAAAAAEAAEAAQAAAAAAAAD5/wwAAQAAAAAAAAD6/wwAAQAAAAAAAAD6/w0AAQAAAAAAAAD7/w0AAQAAAAAAAAAPAAQAAQAAAAAAAAAWAPH/AQAAAAAAAAAXAPH/AQAAAAAAAAAYAPH/AQAAAAAAAAAZAPH/AQAAAAAAAAAZAPL/AQAAAAAAAAAYAPL/AQAAAAAAAAAXAPL/AQAAAAAAAAAWAPL/AQAAAAAAAAAZAAkAAQAAAAAAAAAaAAkAAQAAAAAAAAAbAAkAAQAAAAAAAAAbAAoAAQAAAAAAAAAaAAoAAQAAAAAAAAAZAAoAAQAAAAAAAAAlAAQAAQAAAAAAAAAlAAYAAQAAAAAAAAA2APX/AQAAAAAAAABAAPT/AQAAAAAAAABAAPX/AQAAAAAAAAAzAAIAAQAAAAAAAAAzAAMAAQAAAAAAAAAyAAgAAQAAAAAAAAAxAAgAAQAAAAAAAAAxAAkAAQAAAAAAAAAwAPv/AQAAAAAAAAAgAP3/AQAAAAAAAADw/+3/AQAAAAAAAADx/+3/AQAAAAAAAAD6//X/AQAAAAAAAAD6//b/AQAAAAAAAAD7//b/AQAAAAAAAAD7//X/AQAAAAAAAADa/wMAAQAAAAAAAADb/wMAAQAAAAAAAADb/wQAAQAAAAAAAADa/wQAAQAAAAAAAADZ//H/AQAAAAAAAADk//j/AQAAAAAAAADe//H/AQAAAAAAAADe//L/AQAAAAAAAADd//L/AQAAAAAAAADd//H/AQAAAAAAAADX/+n/AQAAAAAAAADW/+n/AQAAAAAAAADp/wcAAQAAAAAAAADp/wgAAQAAAAAAAADq/wgAAQAAAAAAAADq/wcAAQAAAAAAAABIAPz/AQAAAAAAAABQAAMAAQAAAAAAAABWAAMAAQAAAAAAAABcAAIAAQAAAAAAAABjAAEAAQAAAAAAAABYAPn/AQAAAAAAAAD7//T/AQAAAAAAAAD6//T/AQAAAAAAAAD5//T/AQAAAAAAAAD4//T/AQAAAAAAAAD7//P/AQAAAAAAAAD6//P/AQAAAAAAAAD5//P/AQAAAAAAAAD4//P/AQAAAAAAAADY/+n/AQAAAAAAAADo/wcAAQAAAAAAAADo/wgAAQAAAAAAAADn/wgAAQAAAAAAAADn/wcAAQAAAAAAAAAWAPP/AQAAAAAAAAAXAPP/AQAAAAAAAAAYAPP/AQAAAAAAAAAZAPP/AQAAAAAAAAAVAPH/AQAAAAAAAAAVAPL/AQAAAAAAAAAVAPP/AQAAAAAAAADL//7/AQAAAAAAAADN//j/AQAAAAAAAADT/wMAAQAAAAAAAADC/wIAAQAAAAAAAAC7//7/AQAAAAAAAAC7////AQAAAAAAAAC6////AQAAAAAAAAC6//7/AQAAAAAAAAC///T/AQAAAAAAAAAtAPz/AQAAAAAAAAAtAPv/AQAAAAAAAAA=")
tile_set = SubResource("TileSet_344ge")

[node name="Camera2D" type="Camera2D" parent="."]
scale = Vector2(0.5, 0.5)
zoom = Vector2(2, 2)
script = ExtResource("1_ynf5e")

[node name="WinMenu" parent="Camera2D" instance=ExtResource("5_muem4")]
process_mode = 2
visible = false

[node name="AboutControls" parent="Camera2D" instance=ExtResource("4_k12tt")]
process_mode = 2
visible = false
offset_left = -464.0
offset_top = -400.0
offset_right = -464.0
offset_bottom = -400.0

[node name="LoopStartWaitMenu" parent="Camera2D" instance=ExtResource("4_wsu2k")]
process_mode = 2
visible = false

[node name="GamePlayUI" parent="Camera2D" instance=ExtResource("2_344ge")]
unique_name_in_owner = true

[node name="PauseUI" parent="Camera2D" instance=ExtResource("3_hptm8")]
unique_name_in_owner = true
process_mode = 2
visible = false

[node name="DeathMenu" parent="Camera2D" instance=ExtResource("4_d1ilt")]
process_mode = 2
offset_left = -16.0
offset_right = 24.0

[node name="GameOver" parent="Camera2D" instance=ExtResource("11_pdsj5")]
process_mode = 2
visible = false

[node name="Player" type="CharacterBody2D" parent="." groups=["players"]]
unique_name_in_owner = true
process_mode = 1
position = Vector2(-1656, -128)
collision_layer = 2
script = ExtResource("2_bo1nx")
walk_acceleration = 3800.0
speed_damping = 0.8

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_8gbba")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Player"]
sprite_frames = SubResource("SpriteFrames_s8vy0")
animation = &"fall"

[node name="WinArea" type="Area2D" parent="."]
position = Vector2(1688, -176)
collision_mask = 2
script = ExtResource("12_fdnlq")
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="WinArea"]
shape = SubResource("RectangleShape2D_kry3j")

[node name="MeshInstance2D" type="Sprite2D" parent="WinArea"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("13_0ld40")

[node name="CPUParticles2D" type="CPUParticles2D" parent="WinArea"]
amount = 2
texture = ExtResource("14_gqmmt")
lifetime = 0.3
speed_scale = 0.7
emission_shape = 3
emission_rect_extents = Vector2(16, 16)
direction = Vector2(0, 0)
spread = 180.0
gravity = Vector2(0, -0.9)
scale_amount_min = 0.2
scale_amount_max = 0.75
scale_amount_curve = SubResource("Curve_yc10j")

[node name="Label" type="Label" parent="WinArea"]
visible = false
offset_left = -16.0
offset_top = -16.0
offset_right = 24.0
offset_bottom = 7.0
text = "Win"
label_settings = SubResource("LabelSettings_6bp64")

[node name="MaceChain" type="Line2D" parent="." node_paths=PackedStringArray("mace", "tilemap", "target")]
width = 2.0
gradient = SubResource("Gradient_jbj1t")
joint_mode = 2
script = ExtResource("7_6bp64")
mace = NodePath("../Mace")
tilemap = NodePath("../Map")
target = NodePath("../Player")

[node name="Mace" parent="." instance=ExtResource("15_wsu2k")]
position = Vector2(-1784, -192)

[node name="Music" type="AudioStreamPlayer" parent="."]
process_mode = 3
stream = ExtResource("16_k12tt")
volume_db = -15.0
autoplay = true

[node name="BG" type="CanvasLayer" parent="."]
layer = -1
offset = Vector2(480, 360)
transform = Transform2D(1, 0, 0, 1, 480, 360)

[node name="Sprite2D" type="Sprite2D" parent="BG"]
self_modulate = Color(0.4, 0.4, 0.4, 1)
scale = Vector2(3, 3)
texture = ExtResource("17_muem4")

[connection signal="completed_loop" from="MaceChain" to="MaceChain" method="_on_completed_loop"]
